% !TeX program = lualatex

% Author: Malte, DE7LMS
% Year: 2021
% TB504C
\documentclass[convert = false, border=5pt]{standalone}
\input{../common/settings.tex}

\newcommand{\domain}{8}
\begin{document}
\begin{tikzpicture}[
    thick,
    >={Triangle[angle=45:1pt 6]},
    samples=500,
    x={(1cm,0.2cm)},
    y={(0cm,1cm)},
    z={(0.6cm,-0.2cm)},
    domain=0:\domain*pi
  ]

  \node at (2.3*pi,1.5,0) {};
  \fill[lightgray] (0,-2.1,-2) -- (2.2*pi,-2.1,-2) -- (2.2*pi,-2.1,2) -- (0,-2.1,2) -- cycle;
  \node[left] at (2,-2.1,0) {Erde};
  \draw[draw=gray, ->] (0,0,0) -- (2.3*pi,0,0) node[right] {S};
  \draw[dash pattern=on 4pt off 2pt] plot (\x/\domain*2, {1.5 * sin(\x r)}, {1.5 * cos(\x r)});
  \draw plot (\x/\domain*2, {1.5 * sin((\x+pi/2) r)}, {1.5 * cos((\x+pi/2) r)});
  \path (pi * 0.5/4, {1.5 * sin((pi * 0.5) r)}, {1.5 * cos((pi * 0.5) r)}) node[above] {H};
  \path (pi * 0.5/4, {1.5 * sin((pi * 0.5 + pi/2) r)}, {1.5 * cos((pi * 0.5 + pi/2) r)}) node[left] {E};
  \foreach \x in {0,0.5,1,...,\domain} {
    \draw[->, dash pattern=on 4pt off 2pt] (pi * \x/\domain*2,0,0) -- (pi * \x/\domain*2, {1.5 * sin((pi * \x) r)}, {1.5 * cos((pi * \x) r)});
    \draw[->] (pi * \x/\domain*2,0,0) -- (pi * \x/\domain*2, {1.5 * sin((pi * \x + pi/2) r)}, {1.5 * cos((pi * \x + pi/2) r)});
  }
\end{tikzpicture}

\end{document}